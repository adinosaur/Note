死锁-第一节
=======

##计算机资源

###资源概述
死锁是由资源分配而引起的，对于计算机来说资源可以是设备或者是信息。简单地说，资源是计算机中随着时间推移，能获取、使用、释放的东西。例如CPU、内存、打印机、锁等等。
当编程时，我们需要使用某一个资源的时候通常可以抽象成3个步骤：

1. 申请资源。
2. 使用资源。
3. 释放资源。

当资源得不到满足时，一般会在步骤1阻塞（申请该资源的进程或线程被挂起）。

###资源分类
资源可以被分为两类：

1. 可抢占资源。（CPU、内存、网络等）
2. 不可抢占资源。（互斥锁、打印机等）

一般死锁发生在分配不可抢占的资源上。

##死锁

###死锁概述
如果一个进程集合中的每一个进程都在等待只能由该集合中其它进程才能引发的事件，那么该进程集合是死锁的。一般而言，这个集合中的每个进程都占有一部分的资源，而且在等待其它进程所占有的资源。所有进程都因此被挂起，此时没有其它行为发生所有的进程将一直等待下去。

###死锁发生的条件
资源死锁发生的条件有4个，缺一不可：

1. 互斥。一个资源要么是可用的，要么被分配给其中一个进程。
2. 占有和等待。已经得到某些资源的进程可以再申请其它的资源。
3. 不可抢占。已经分配给进程的资源不能被抢占，只能被资源占有的进程显示释放。
4. 环路等待。死锁发生时，系统中一定有两个或以上的进程组成的一条环路，该环路上的每一个进程都在等待着下一个进程所占有的资源。

###死锁的处理策略
一般来说，有四种方法处理死锁：

1. 鸵鸟算法。
2. 死锁检测并恢复。
3. 仔细对资源分配，动态地避免死锁。
4. 通过破坏引起死锁的4个必要条件之一，防止死锁的发生。

##参考资料
1. 《现代操作系统 第三版》第6章 死锁